<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="/cdn-cgi/apps/head/3cOPSgo5Omz84ycX7CvigfX4cpw.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-82213539-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-82213539-2');
    </script>
    <title>1.2 Upgrading to Micronaut 2.x 2.1.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="https://docs.micronaut.io/docsassets/css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="https://docs.micronaut.io/docsassets/css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Micronaut
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/quickStart.html"><strong>2</strong><span>Quick Start</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/ioc.html"><strong>3</strong><span>Inversion of Control</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/config.html"><strong>4</strong><span>Application Configuration</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/aop.html"><strong>5</strong><span>Aspect Oriented Programming</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/httpServer.html"><strong>6</strong><span>The HTTP Server</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/httpClient.html"><strong>7</strong><span>The HTTP Client</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/cloud.html"><strong>8</strong><span>Cloud Native Features</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/serverlessFunctions.html"><strong>9</strong><span>Serverless Functions</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/messaging.html"><strong>10</strong><span>Message-Driven Microservices</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/commandLineApps.html"><strong>11</strong><span>Standalone Command Line Applications</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/configurations.html"><strong>12</strong><span>Configurations</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/languageSupport.html"><strong>13</strong><span>Language Support</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/management.html"><strong>14</strong><span>Management &amp; Monitoring</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/security.html"><strong>15</strong><span>Security</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/multitenancy.html"><strong>16</strong><span>Multi-Tenancy</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/cli.html"><strong>17</strong><span>Micronaut CLI</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/i18n.html"><strong>18</strong><span>Internationalization</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/appendix.html"><strong>19</strong><span>Appendices</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/quickStart.html"><strong>2</strong><span>Quick Start</span> >></a></div>
                


                <div class="project">
                    <h1>1.2 Upgrading to Micronaut 2.x</h1>

                    <p><strong>Version:</strong> 2.1.0.BUILD-SNAPSHOT</p>
                </div>

                

                
<h2 id="upgrading"><a class="anchor" href="#upgrading"></a>1.2 Upgrading to Micronaut 2.x</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-core/edit/master/src/main/docs/guide/introduction/upgrading.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>This section covers the steps required to upgrade a Micronaut 1.x application to Micronaut 2.x.</p>
</div>
<div class="sect2">
<h3 id="_thread_pool_selection_now_manual">Thread Pool Selection Now Manual</h3>
<div class="paragraph">
<p>If your application does blocking I/O such as communication via JDBC or JPA you should annotate all controllers that interact with these blocking resources with the <a href="../api/io/micronaut/scheduling/annotation/ExecuteOn.html">@ExecuteOn</a> annotation specifying either the default I/O thread pool or a thread pool that you configure an manage to deal with these blocking interactions. For example:</p>
</div>
<div class="listingblock multi-language-sample">
<div class="title">Using @ExecuteOn</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import io.micronaut.http.annotation.*;
import io.micronaut.scheduling.TaskExecutors;
import io.micronaut.scheduling.annotation.ExecuteOn;

@Controller("/executeOn/people")
public class PersonController {

    private final PersonService personService;

    PersonController(
            PersonService personService) {
        this.personService = personService;
    }

    @Get("/{name}")
    @ExecuteOn(TaskExecutors.IO) <b class="conum">(1)</b>
    Person byName(String name) {
        return personService.findByName(name);
    }
}</code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="title">Using @ExecuteOn</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import io.micronaut.http.annotation.*
import io.micronaut.scheduling.TaskExecutors
import io.micronaut.scheduling.annotation.ExecuteOn

@Controller("/executeOn/people")
class PersonController {

    private final PersonService personService

    PersonController(
            PersonService personService) {
        this.personService = personService
    }

    @Get("/{name}")
    @ExecuteOn(TaskExecutors.IO) <b class="conum">(1)</b>
    Person byName(String name) {
        return personService.findByName(name)
    }
}</code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="title">Using @ExecuteOn</div>
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">import io.micronaut.http.annotation.*
import io.micronaut.scheduling.TaskExecutors
import io.micronaut.scheduling.annotation.ExecuteOn

@Controller("/executeOn/people")
class PersonController (private val personService: PersonService) {
    @Get("/{name}")
    @ExecuteOn(TaskExecutors.IO) <b class="conum">(1)</b>
    fun byName(name: String): Person {
        return personService.findByName(name)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <a href="../api/io/micronaut/scheduling/annotation/ExecuteOn.html">@ExecuteOn</a> annotation is used to execute the operation on the I/O thread pool</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you wish to return to the previous behaviour as defined in Micronaut 1.x you can set <code>micronaut.server.thread-selection</code> to <code>AUTO</code> in configuration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_error_with_classes_in_code_io_micronaut_cache_code_package">Compilation Error with classes in <code>io.micronaut.cache</code> package</h3>
<div class="paragraph">
<p>If your application fails to compile due to missing classes in the <code>io.micronaut.cache</code> you need to add a dependency on a cache implementation, for example the default cache implementation was Caffeine and this can be restored with the following dependency:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"io.micronaut.cache:micronaut-cache-caffeine")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.cache&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-cache-caffeine&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_error_with_classes_in_code_javax_annotation_code_package">Compilation Error with classes in <code>javax.annotation</code> package</h3>
<div class="paragraph">
<p>If your application fails to compile referencing classes in the <code>javax.annotation</code> package such as <code>@Nullable</code> and <code>@Nonnull</code> you should update your project to instead import <code>edu.umd.cs.findbugs.annotations</code> from Spot Bugs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_new_group_ids">New Group IDs</h3>
<div class="paragraph">
<p>Some dependencies have new Maven Group IDs so you may need to update your dependency. The following table summarizes changes to group IDs:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Updated Maven Group IDs</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Previous ID</th>
<th class="tableblock halign-left valign-top">New ID</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-aws-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.aws:micronaut-aws-*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-cassandra</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.cassandra:micronaut-cassandra</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-elasticsearch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.elasticsearch:micronaut-elasticsearch</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-flyway</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.flyway:micronaut-flyway</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-runtime-groovy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.groovy:micronaut-runtime-groovy</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-hibernate-validator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.beanvalidation:micronaut-hibernate-validator</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-jmx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.jmx:micronaut-jmx</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-kafka</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.kafka:micronaut-kafka</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-liquibase</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.liquibase:micronaut-liquibase</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-micrometer-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.micrometer:micronaut-micrometer-*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-mongo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.mongodb:micronaut-mongo-reactive</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-neo4j</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.neo4j:micronaut-neo4j</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-netflix-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.netflix:micronaut-netflix-*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-picocli</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.picocli:micronaut-picocli</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-rabbitmq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.rabbitmq:micronaut-rabbitmq</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-redis</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.redis:micronaut-redis</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-rss</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.rss:micronaut-rss</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-itunespodcast</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.rss:micronaut-itunespodcast</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut:micronaut-security-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.security:micronaut-security-*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-views-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.views:micronaut-views-*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.configuration:micronaut-jdbc-*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.sql:micronaut-jdbc-*</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_aws_module_changes">AWS Module Changes</h3>
<div class="paragraph">
<p>The AWS functionality (including support for AWS ParameterStore, AWS Route53 and AWS Lambda Function Client) has been moved out of the Micronaut core therefore if you need AWS related functionality you should use the necessary module.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Updated AWS Modules</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">New Dependency</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.function.client.aws</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.aws:micronaut-function-client-aws</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.discovery.aws.parameterstore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.aws:micronaut-aws-parameter-store</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.discovery.aws.route53</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.micronaut.aws:micronaut-aws-route53</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_kubernetes_discovery_service_deprecation">Kubernetes Discovery Service deprecation</h3>
<div class="paragraph">
<p>The class <code>io.micronaut.discovery.kubernetes.KubernetesDiscoveryClient</code>, that was deprecated in Micronaut 1.2, has now been removed from Micronaut 2.0. The replacement is the new <a href="https://micronaut-projects.github.io/micronaut-kubernetes/latest/guide/">Micronaut Kubernetes</a> module, with an improved support for running Micronaut applications in a Kubernetes cluster, including support for Kubernetes' <code>ConfigMap</code>s, <code>Secret</code>s and more.</p>
</div>
<div class="paragraph">
<p>To use the new module, you need to add the following dependency:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"io.micronaut.kubernetes:micronaut-kubernetes-discovery-client")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.kubernetes&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-kubernetes-discovery-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
</div>
<div class="sect2">
<h3 id="_transaction_management">Transaction Management</h3>
<div class="paragraph">
<p>For Micronaut 2.0, we recommend you to use the native Micronaut-based transaction management instead of other alternatives such as Spring Transaction Management.</p>
</div>
<div class="paragraph">
<p>You will use <a href="https://docs.oracle.com/javaee/7/api/javax/transaction/Transactional.html">Java EE 7 javax.transaction.Transactional annotation</a> and <a href="https://micronaut-projects.github.io/micronaut-data/latest/api/index.html">io.micronaut.transaction.annotation.ReadOnly</a> to mark your transaction demarcations.</p>
</div>
<div class="paragraph">
<p>To use those annotations, you have to include the <code>micronaut-data-processor</code> dependency in your annotation processor configuration:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">annotationProcessor(<span class="hljs-string">"io.micronaut.data:micronaut-data-processor")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-data-processor&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>If you use Hibernate/JPA, you will need to add as well:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"io.micronaut.data:micronaut-data-hibernate-jpa")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.data&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-data-hibernate-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>Then, code such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.micronaut.spring.tx.annotation.Transactional;
...
..
.
@Singleton
public class GenreRepositoryImpl implements GenreRepository {
...
..
.
    @Transactional(readOnly = true)
    public Optional&lt;Genre&gt; findById(@NotNull Long id) {
...
..
    }

    @Transactional
    public Genre save(@NotBlank String name) {
    ...
    ..
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.transaction.Transactional;
import io.micronaut.transaction.annotation.ReadOnly;
...
..
.
@Singleton
public class GenreRepositoryImpl implements GenreRepository {
...
..
.
    @ReadOnly
    public Optional&lt;Genre&gt; findById(@NotNull Long id) {
...
..
    }

    @Transactional
    public Genre save(@NotBlank String name) {
    ...
    ..
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_micronaut_2_for_groovy_users">Micronaut 2 for Groovy Users</h3>
<div class="paragraph">
<p>Micronaut 2 defaults to Groovy 3 and Spock 2 both of which include significant changes at the language and testing framework level.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some features of Micronaut 2 for Groovy users are currently in preview status including GORM 7.1 and Spock 2 support as these frameworks do not yet have stable releases.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the case of Spock 2 the most important change is that Spock 2 deprecates support for JUnit 4 and the associated JUnit 4 test runner and replaces it with JUnit 5 Platform.</p>
</div>
<div class="paragraph">
<p>In the case of a Gradle build this change means that when upgrading to Micronaut 2 with Spock 2 you may find your tests don&#8217;t execute at all which can give you the false sense of security that the upgrade was successful.</p>
</div>
<div class="paragraph">
<p>To ensure your Spock 2 tests run in a Micronaut 2 Gradle build you must add the following configuration to your <code>build.gradle</code> to enable JUnit 5 platform:</p>
</div>
<div class="listingblock">
<div class="title">Using JUnit Platform</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">test {
  useJUnitPlatform()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this configuration is place your Spock 2 tests will execute correctly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_other_breaking_changes">Other Breaking Changes</h3>
<div class="paragraph">
<p>If the above cases don&#8217;t cover your use case see the section on <a href="#breaks">Breaking Changes</a> for a list of other changes that are regarded as breaking in this release.</p>
</div>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item next-right"><a href="../../guide/quickStart.html"><strong>2</strong><span>Quick Start</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="https://docs.micronaut.io/docsassets/js/docs.js"></script>

</body>
</html>
